<div class="container py-3">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Διαχείριση Κατηγοριών / Κλάδων / Ειδικοτήτων</h4>
    <div>
      <button class="btn btn-sm btn-primary" (click)="addCategory()">+ Προσθήκη Κατηγορίας</button>
    </div>
  </div>

  <!-- categories -->
  @for (cat of employeeCategories(); let catIndex = $index; track catIndex) {
    <div class="card mb-3">
      <div class="card-body">

        <div class="d-flex align-items-center mb-2 gap-2">
          <label class="form-label mb-0 me-2"><strong>Κατηγορία</strong></label>
          <input
            class="form-control form-control-sm w-50"
            [value]="cat.category.name"
            (blur)="updateCategoryName(catIndex, $event)"
          />
          <button class="btn btn-sm btn-danger ms-2" (click)="removeCategory(catIndex)">Διαγραφή</button>
          <button class="btn btn-sm btn-success ms-2" (click)="addBranch(catIndex)">+ Κλάδος</button>
        </div>

        <!-- branches -->
        @for (br of cat.category.branches; let brIndex = $index; track brIndex) {
          <div class="border rounded p-2 mb-2">
            <div class="d-flex align-items-center gap-2 mb-2">
              <label class="form-label mb-0 me-2">Κλάδος</label>
              <input
                class="form-control form-control-sm w-50"
                [value]="br.name"
                (blur)="updateBranchName(catIndex, brIndex, $event)"
              />
              <button class="btn btn-sm btn-danger ms-2" (click)="removeBranch(catIndex, brIndex)">Διαγραφή</button>
              <button class="btn btn-sm btn-outline-primary ms-2" (click)="addSpecialty(catIndex, brIndex)">+ Ειδικότητα</button>
            </div>

            <!-- specialties -->
            <ul class="list-group">
              @for (spec of br.specialties; let specIndex = $index; track specIndex) {
                <li class="list-group-item d-flex align-items-center justify-content-between">
                  <input
                    class="form-control form-control-sm w-50"
                    [value]="spec"
                    (blur)="updateSpecialty(catIndex, brIndex, specIndex, $event)"
                  />
                  <button class="btn btn-sm btn-outline-danger" (click)="removeSpecialty(catIndex, brIndex, specIndex)">✖</button>
                </li>
              }
            </ul>
          </div>
        } <!-- end branches for -->

      </div>
    </div>
  } <!-- end categories for -->

</div>

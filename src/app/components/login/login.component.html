<h1 class="govgr-heading-md">Έλεγχος πρόσβασης</h1>

<div *ngIf="!user()" class="govgr-body">
  
</div>

<div *ngIf="!user()" class="govgr-body">
  @if(enableGoogleAuth == "true") {
    <p>Στην εκπαιδευτική πλατφορμα η πρόσβαση στο σύστημα είναι δυνατή μόνο από εξουσιοδοτημένους  χρήστες με τη χρήση του Google account τους. Χρησιμοποιήστε τον παρακάτω σύνδεσμο για να συνδεθείτε.</p>
    <asl-google-signin-button type="standard" size="large"></asl-google-signin-button>
  } @else {
    <p>Αυθεντικοποίησης υπαλλήλων Φορέων με την χρήση Κωδικών Δημόσιας Διοίκησης</p>
    <button class="btn btn-primary" (click)="login()">
      Είσοδος με Κωδικούς Δημόσιας Διοίκησης
    </button>
  }
</div>

@if (loading()) {
  <span class="d-flex align-items-center gap-2 mb-5">
    Αναμονή αυθεντικοποίησης...
    <span class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </span>
  </span>
}

<div *ngIf="user()" class="mb-5">

  <h1 class="govgr-heading-sm">Συνδέθηκε ο χρήστης <strong>{{user().name}}</strong></h1>

  <p>
    Πίνακας με τα λεκτικά των θέσεων που κατέχει ο υπάλληλος οργανωμένα ιεραρχικά με βάση την οργανική μονάδα του υπαλλήλου:
    <strong> {{ user().empOrgUnitTexts }}</strong>
  </p>
  
  <p><strong>Προσβάσεις υπαλλήλου:</strong></p>
  <ul>
    @for (role of user().roles; track role){
      <li>Ρόλος: {{role.role}}, Φορείς: {{role.foreas}}</li>
    }
  </ul>
</div>

<div *ngIf="!user() && !loading()" class="govgr-body">
  <h1 class="govgr-heading-md">Δεν είστε πιστοποιημένος χρήστη</h1>
</div>